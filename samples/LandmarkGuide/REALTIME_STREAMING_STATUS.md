# λ¦¬μ–Όνƒ€μ„ μ¤νΈλ¦¬λ° μ‚¬μ© ν„ν™©

## ν„μ¬ μƒνƒ

### β… λ¦¬μ–Όνƒ€μ„ μ¤νΈλ¦¬λ° μ‚¬μ© μ¤‘!

μ½”λ“λ¥Ό ν™•μΈν• κ²°κ³Ό, **OpenAI Realtime APIλ¥Ό μ‚¬μ©ν•κ³  μμµλ‹λ‹¤.**

## ν„μ¬ ν”λ΅μ°

### OpenAI Realtime μ‚¬μ© μ‹ (κΈ°λ³Έκ°’: `useRealtime = true`)

```
1. π¤ μ¤λ””μ¤ μ¤νΈλ¦¬λ°
   - BluetoothScoAudioCapture β†’ μ‹¤μ‹κ°„ μ¤λ””μ¤ μμ§‘
   - openAIRealtime.sendAudio(audioData) β†’ WebSocketμΌλ΅ μ¤νΈλ¦¬λ°
   β†“
2. β΅ OpenAI Realtime API (WebSocket)
   - μ‹¤μ‹κ°„ STT (λ§ν•λ” λ™μ• κ³„μ† μΈμ‹)
   - μ‹¤μ‹κ°„ λ²μ—­ (STT μ™„λ£ μ¦‰μ‹)
   - μ‹¤μ‹κ°„ TTS (λ²μ—­ μ™„λ£ μ¦‰μ‹)
   - μ „μ²΄ λ”λ μ΄: ~300ms
   β†“
3. π“¤ Firebase μ „μ†΅
   - onTranscript μ½λ°±μ—μ„ μ¦‰μ‹ μ „μ†΅
   - originalTextλ§ μ „μ†΅ (μ„λ²„μ—μ„ λ²μ—­)
   β†“
4. π”¥ Firebase Functions
   - μ„λ²„μ—μ„ λ¨λ“  μ–Έμ–΄λ΅ λ²μ—­
   - translatedTexts μ—…λ°μ΄νΈ
   β†“
5. π“¨ λ‹¤λ¥Έ μ‚¬μ©μ μμ‹ 
   - μ„λ²„ λ²μ—­λ ν…μ¤νΈ μ‚¬μ©
```

## λ¬Έμ μ  λ°κ²¬!

### ν„μ¬ κµ¬μ΅°μ λ¬Έμ 

1. **μ¤‘λ³µ λ²μ—­ λ°μƒ**
   - OpenAI Realtimeμ΄ ν΄λΌμ΄μ–ΈνΈμ—μ„ λ²μ—­ μν–‰
   - Firebase Functionsκ°€ μ„λ²„μ—μ„λ„ λ²μ—­ μν–‰
   - **λ‘ λ² λ²μ—­μ΄ μΌμ–΄λ‚κ³  μμ!**

2. **λ¦¬μ–Όνƒ€μ„ μ¤νΈλ¦¬λ°μ μ¥μ  λ―Έν™μ©**
   - OpenAI Realtimeμ€ μ΄λ―Έ μ΄μ €μ§€μ—° λ²μ—­ μ κ³µ (~300ms)
   - μ„λ²„ λ²μ—­μ€ μ¶”κ°€ λ”λ μ΄ (200-500ms)
   - **μ„λ²„ λ²μ—­μ΄ μ¤νλ ¤ λ”λ μ΄λ¥Ό μ¦κ°€μ‹ν‚¬ μ μμ**

## κ°μ„  λ°©μ•

### μµμ… 1: λ¦¬μ–Όνƒ€μ„ μ¤νΈλ¦¬λ°λ§ μ‚¬μ© (κ¶μ¥)

OpenAI Realtimeμ΄ μ΄λ―Έ μ™„λ²½ν• λ²μ—­μ„ μ κ³µν•λ―€λ΅:
- μ„λ²„ λ²μ—­ λΉ„ν™μ„±ν™”
- ν΄λΌμ΄μ–ΈνΈμ—μ„λ§ λ¦¬μ–Όνƒ€μ„ λ²μ—­ μ‚¬μ©
- λ‹¤λ¥Έ μ‚¬μ©μμ—κ²λ” μ›λ³Έ ν…μ¤νΈ + λ²μ—­ ν…μ¤νΈ λ¨λ‘ μ „μ†΅

### μµμ… 2: ν•μ΄λΈλ¦¬λ“ λ°©μ‹

- **Aμ λ°ν™”**: OpenAI Realtime μ‚¬μ© (μ΄μ €μ§€μ—°)
- **Bμ μμ‹ **: μ„λ²„ λ²μ—­ μ‚¬μ© (λ‹¤μ¤‘ μ–Έμ–΄ μ§€μ›)

### μµμ… 3: μ„λ²„ λ²μ—­λ§ μ‚¬μ©

- OpenAI Realtime λΉ„ν™μ„±ν™”
- μΌλ° STT μ‚¬μ© (Google, Deepgram λ“±)
- μ„λ²„μ—μ„λ§ λ²μ—­ μ²λ¦¬

## ν„μ¬ μ½”λ“ λ™μ‘

```kotlin
// OpenAI Realtime μ‚¬μ© μ‹
if (useRealtime && openAIRealtime.isConnected()) {
    // 1. μ¤λ””μ¤ μ¤νΈλ¦¬λ°
    openAIRealtime.sendAudio(audioData)
    
    // 2. STT μ™„λ£ μ‹
    openAIRealtime.onTranscript = { transcript ->
        // Firebaseμ— μ¦‰μ‹ μ „μ†΅ (μ„λ²„ λ²μ—­ λ€κΈ°)
        firebaseService.sendMessage(transcript, capturedSpeakingLang)
    }
    
    // 3. λ²μ—­ μ™„λ£ μ‹ (ν΄λΌμ΄μ–ΈνΈ μΈ΅)
    openAIRealtime.onTranslationWithOriginal = { original, translation ->
        // λ΅μ»¬ μ±„ν… νμ¤ν† λ¦¬μ—λ§ μ¶”κ°€
        chatHistory = chatHistory + ChatMessage(...)
    }
}
```

## κ²°λ΅ 

**λ¦¬μ–Όνƒ€μ„ μ¤νΈλ¦¬λ°μ€ μ‚¬μ© μ¤‘μ΄μ§€λ§, μ„λ²„ λ²μ—­κ³Ό μ¤‘λ³µλκ³  μμµλ‹λ‹¤.**

### κ¶μ¥ μ‚¬ν•­

1. **OpenAI Realtime μ‚¬μ© μ‹**: μ„λ²„ λ²μ—­ λΉ„ν™μ„±ν™”
2. **μ„λ²„ λ²μ—­ μ‚¬μ© μ‹**: OpenAI Realtime λΉ„ν™μ„±ν™”
3. **ν•μ΄λΈλ¦¬λ“**: λ°ν™”μλ” Realtime, μμ‹ μλ” μ„λ²„ λ²μ—­

μ–΄λ–¤ λ°©μ‹μ„ μ›ν•μ‹λ‚μ”?
